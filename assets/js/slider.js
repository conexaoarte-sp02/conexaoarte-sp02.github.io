const myDatabase = [{
    category: [1],
    name: "Museu de Arte de São Paulo",
    site: "https://masp.gov.br",
    address: "Av. Paulista, 1578 - Bela Vista",
    city: "São Paulo",
    state: "SP",
    cep: "01310-200",
    urlImage: "assets/images/gallery/masp.jpg",
    description: "Museu de Arte de São Paulo Assis Chateaubriand é uma das mais importantes instituições culturais brasileiras. Localiza-se, desde 7 de novembro de 1968, na Avenida Paulista, cidade de São Paulo, em um edifício projetado pela arquiteta ítalo-brasileira Lina Bo Bardi para ser sua sede.",
    longitudeLatitude: "-23.5619026,-46.6561395",
    ingresso: {
        inteira: 0,
        meia: 0
    },
    link: "https://goo.gl/maps/o5oqNtZZo2dmugkCA"
}, {
    category: [3],
    name: "Theatro Municipal",
    site: "",
    address: "Av. Paulista, 1578 - Bela Vista",
    city: "São Paulo",
    state: "SP",
    cep: "01310-200",
    urlImage: "assets/images/gallery/theatro-municipal.jpg",
    description: "Considerado um cartão postal da cidade mais populosa do Brasil, o Teatro Municipal de São Paulo é um dos mais importantes lugares históricos da capital paulista. Com estilo arquitetônico semelhante e inspirado na Ópera de Paris, o teatro fica localizado no Centro Histórico da cidade, próximo à região da Praça da Sé.",
    longitudeLatitude: "-23.5455164,-46.6389625",
    ingresso: {
        inteira: 0,
        meia: 0
    },
    link: "https://goo.gl/maps/9d1rRj583Jbv7H4JA"
}, {
    category: [1, 3],
    name: "Museu do Videogame",
    site: "",
    address: "Av. Paulista, 1578 - Bela Vista",
    city: "São Paulo",
    state: "SP",
    cep: "01310-200",
    urlImage: "assets/images/gallery/museu-videogame.jpg",
    description: "Com base no estado da arte da produção e recepção de games, esta pesquisa tem como objetivo propor a construção de um museu do jogo concebido no sentido de produzir uma experiência gamificada para quem o visita. Entendido como gamificação o fenômeno que vem sendo amplamente divulgado e incorporado .",
    longitudeLatitude: "-23.5392553,-46.6391333",
    ingresso: {
        inteira: 0,
        meia: 0
    },
    link: "https://goo.gl/maps/HyHmZknqwoZDHccCA"
}, {
    category: [3],
    name: "Parque Ibirapuera",
    site: "",
    address: "Av. Paulista, 1578 - Bela Vista",
    city: "São Paulo",
    state: "SP",
    cep: "01310-200",
    urlImage: "assets/images/gallery/parque-ibirapuera.jpg",
    description: "Possuí museus, planetários, auditórios, e áreas de lazer com ciclovias e quadras.",
    longitudeLatitude: "-23.588333,-46.658890",
    ingresso: {
        inteira: 0,
        meia: 0
    },
    link: "https://goo.gl/maps/1mAXkMP1m2KbySWaA"
}, {
    category: [4],
    name: "Autódromo de Interlagos",
    site: "",
    address: "Av. Paulista, 1578 - Bela Vista",
    city: "São Paulo",
    state: "SP",
    cep: "01310-200",
    urlImage: "assets/images/gallery/autodromo-interlagos.jpg",
    description: "Possuí museus, planetários, auditórios, e áreas de lazer com ciclovias e quadras.",
    longitudeLatitude: "-23.7017923,-46.6974148",
    ingresso: {
        inteira: 0,
        meia: 0
    },
    link: "https://goo.gl/maps/752uFkSKjuCVfoC89"
}, {
    category: [2, 3],
    name: "Beco do Batman",
    site: "",
    address: "Av. Paulista, 1578 - Bela Vista",
    city: "São Paulo",
    state: "SP",
    cep: "01310-200",
    urlImage: "assets/images/gallery/beco-batman.jpg",
    description: "Possuí museus, planetários, auditórios, e áreas de lazer com ciclovias e quadras.",
    longitudeLatitude: "-23.5567559,-46.6865132",
    ingresso: {
        inteira: 0,
        meia: 0
    },
    link: "https://goo.gl/maps/qfcy6sKb4yFdroKL8"
}, {
    category: [2],
    name: "Pinacoteca de São Paulo",
    site: "",
    address: "Av. Paulista, 1578 - Bela Vista",
    city: "São Paulo",
    state: "SP",
    cep: "01310-200",
    urlImage: "assets/images/gallery/pinacoteca.jpg",
    description: "Possuí museus, planetários, auditórios, e áreas de lazer com ciclovias e quadras.",
    longitudeLatitude: "-23.5348273,-46.6337606",
    ingresso: {
        inteira: 0,
        meia: 0
    },
    link: "https://goo.gl/maps/29GxZUXT8Jav5rf38"
}, {
    category: [3],
    name: "Aquário de São Paulo",
    site: "",
    address: "Av. Paulista, 1578 - Bela Vista",
    city: "São Paulo",
    state: "SP",
    cep: "01310-200",
    urlImage: "assets/images/gallery/aquario.jpg",
    description: "Possuí museus, planetários, auditórios, e áreas de lazer com ciclovias e quadras.",
    longitudeLatitude: "-23.5936461,-46.6142621",
    ingresso: {
        inteira: 0,
        meia: 0
    },
    link: "https://goo.gl/maps/fZkFGdw3EvXfk9sM6"
}, {
    category: [3],
    name: "Avenida Paulista",
    site: "",
    address: "Av. Paulista, 1578 - Bela Vista",
    city: "São Paulo",
    state: "SP",
    cep: "01310-200",
    urlImage: "assets/images/gallery/avenida-paulista.jpg",
    description: "Possuí museus, planetários, auditórios, e áreas de lazer com ciclovias e quadras.",
    longitudeLatitude: "-23.5614955,-46.6565725",
    ingresso: {
        inteira: 0,
        meia: 0
    },
    link: "https://goo.gl/maps/gDchYCW8ciwRmTrp8"
}, {
    category: [5],
    name: "Mercado Municipal de São Paulo",
    site: "",
    address: "Av. Paulista, 1578 - Bela Vista",
    city: "São Paulo",
    state: "SP",
    cep: "01310-200",
    urlImage: "assets/images/gallery/mercado-municipal.jpg",
    description: "Possuí museus, planetários, auditórios, e áreas de lazer com ciclovias e quadras.",
    longitudeLatitude: "-23.5418938,-46.6295889",
    ingresso: {
        inteira: 0,
        meia: 0
    },
    link: "https://goo.gl/maps/vypLD1uuwKdcTJPr5"
}, {
    category: [5],
    name: "Restaurante Président - Chef Érick Jacquin",
    site: "",
    address: "Av. Paulista, 1578 - Bela Vista",
    city: "São Paulo",
    state: "SP",
    cep: "01310-200",
    urlImage: "assets/images/gallery/president-erick-jacquin.jpg",
    description: "Possuí museus, planetários, auditórios, e áreas de lazer com ciclovias e quadras.",
    longitudeLatitude: "-23.5627846,-46.6704406",
    ingresso: {
        inteira: 0,
        meia: 0
    },
    link: "https://g.page/president-jacquin?share"
}, {
    category: [1, 4],
    name: "Museu do Futebol",
    site: "",
    address: "Av. Paulista, 1578 - Bela Vista",
    city: "São Paulo",
    state: "SP",
    cep: "01310-200",
    urlImage: "assets/images/gallery/museu-do-futebol.jpg",
    description: "Possuí museus, planetários, auditórios, e áreas de lazer com ciclovias e quadras.",
    longitudeLatitude: "-23.5477761,-46.6651754",
    ingresso: {
        inteira: 0,
        meia: 0
    },
    link: "https://goo.gl/maps/M7tGvcYAm5Tp6ChE7"
}, {
    category: [1, 3],
    name: "Museu do Ipiranga",
    site: "",
    address: "Av. Paulista, 1578 - Bela Vista",
    city: "São Paulo",
    state: "SP",
    cep: "01310-200",
    urlImage: "assets/images/gallery/museu-do-ipiranga.jpg",
    description: "Possuí museus, planetários, auditórios, e áreas de lazer com ciclovias e quadras.",
    longitudeLatitude: "-23.5855776,-46.6111399",
    ingresso: {
        inteira: 0,
        meia: 0
    },
    link: "https://goo.gl/maps/61WZCMT5jFwEzftQ9"
}];

function createBlock(galleryElement, location) {

    const card = document.createElement("div");

    card.classList.add("card");

    // <img src="assets/images/gallery/${location.image}" alt="${location.name}" />

    card.innerHTML = `
        <div class="gallery-picture">            
            <img src="${location.urlImage}" alt="${location.name}" />
            <div class="gallery-ellipse">
                <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15 26.6875L13.1875 25.0375C6.75 19.2 2.5 15.35 2.5 10.625C2.5 6.775 5.525 3.75 9.375 3.75C11.55 3.75 13.6375 4.7625 15 6.3625C16.3625 4.7625 18.45 3.75 20.625 3.75C24.475 3.75 27.5 6.775 27.5 10.625C27.5 15.35 23.25 19.2 16.8125 25.05L15 26.6875Z" fill="#AFAFAF"/>
                </svg>
            </div>
        </div>
        <h2>${location.name}</h2>
        <div class="card-location">
            <svg width="14" height="20" viewBox="0 0 14 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7 0C3.13 0 0 3.13 0 7C0 12.25 7 20 7 20C7 20 14 12.25 14 7C14 3.13 10.87 0 7 0ZM7 9.5C5.62 9.5 4.5 8.38 4.5 7C4.5 5.62 5.62 4.5 7 4.5C8.38 4.5 9.5 5.62 9.5 7C9.5 8.38 8.38 9.5 7 9.5Z" fill="#AFAFAF"/>
            </svg>
            <h3>São Paulo - SP</h3>
        </div>
    `;

    card.querySelector(".gallery-ellipse").addEventListener("click", (event) => {

        event.preventDefault();

        card.querySelector(".gallery-ellipse").classList.toggle("active");

    });

    card.querySelector("h2").addEventListener("click", () => {

        window.open(location.site, "_blank");

    });

    galleryElement.appendChild(card);

    setTimeout(() => card.classList.add("show"), 200);    

}

function createGallery(database, galleryEl, filter = 0) {

    if (Number(filter) > 0) {

        database = database.filter((item) => {

            // return item.categoryId.includes(Number(filter));
            return item.category.includes(Number(filter));

        });

    }

    database.forEach(location => {

        createBlock(galleryEl, location);        

    });

}

const gallery = document.querySelector(".carousel-gallery");

createGallery(myDatabase, gallery);

// SLICK SLIDER
function initSlider() {

    $(".carousel-gallery").slick({
        slidesToShow: 5,
        variableWidth: true,
        swipeToSlide: true,
        touchThreshold: 100,
        appendArrows: ".carousel-gallery",
        responsive: [
            {
              breakpoint: 1024,
              settings: {
                slidesToShow: 3,
                slidesToScroll: 3,
                infinite: true,
                dots: true
              }
            },
            {
              breakpoint: 600,
              settings: {
                slidesToShow: 2,
                slidesToScroll: 2
              }
            },
            {
              breakpoint: 480,
              settings: {
                slidesToShow: 1,
                slidesToScroll: 1
              }
            }
            // You can unslick at a given breakpoint now by adding:
            // settings: "unslick"
            // instead of a settings object
        ]
    });

}

function removeActive(elements) {
    elements.forEach(el => {
        if (el.classList.contains("active")) {
            el.classList.remove("active");
        }
    });
}

document.querySelectorAll(".carousel-gallery").forEach((el) => {

    createGallery(myDatabase, el);

});

initSlider();

document.querySelectorAll('.links-slider li a').forEach(linkElement => {

    linkElement.addEventListener("click", (e) => {

        e.preventDefault();
    
        const container = linkElement.closest("div.carousel-container");
    
        const currentGallery = container.querySelector(".carousel-gallery");
    
        document.querySelectorAll(".carousel-container .links-slider a").forEach((element) => {
            element.classList.remove("active");
        });
    
        linkElement.classList.add("active");
    
        $(currentGallery).slick("unslick");
    
        currentGallery.innerHTML = "";

        const category = linkElement.dataset.location;
    
        // const categoryId = (category.id !== 1) ? category.id : 0;
        // const categoryId = (category !== 1) ? category : 0;
    
        // createGallery(myDatabase, currentGallery, categoryId);
        createGallery(myDatabase, currentGallery, category);
    
        initSlider();
    
    });

})

/*
// AXIOS
const apiUrl = "https://besp.westus3.cloudapp.azure.com";

async function getPlaces() {

    const response = await axios.get(`${apiUrl}/places`);

    myDatabase = response.data;

    document.querySelectorAll(".carousel-gallery").forEach((el) => {

        createGallery(myDatabase, el);

    });

    initSlider();

}

getPlaces();

async function getCategories() {

    const response = await axios.get(`${apiUrl}/categories`);

    const categories = response.data;

    const ulCategories = document.createElement("ul");

    categories.forEach((category) => {

        const liCategory = document.createElement("li");

        liCategory.innerHTML = `
            <a href="#" data-location="${category.id}">${category.name}</a>
        `;

        const linkElement = liCategory.querySelector("a");
        
        if (category.id === 1) {
            linkElement.classList.add("active");
        }        

        linkElement.addEventListener("click", (e) => {

            e.preventDefault();

            const container = linkElement.closest("div.carousel-container");

            const currentGallery = container.querySelector(".carousel-gallery");

            document.querySelectorAll(".carousel-container .links-slider a").forEach((element) => {
                element.classList.remove("active");
            });

            linkElement.classList.add("active");

            $(currentGallery).slick("unslick");

            currentGallery.innerHTML = "";

            const categoryId = (category.id !== 1) ? category.id : 0;

            createGallery(myDatabase, currentGallery, categoryId);

            initSlider();

        });

        ulCategories.appendChild(liCategory);

    });

    const divElement = document.querySelector(".carousel-container .links-slider");

    divElement.appendChild(ulCategories);

}

getCategories();
*/